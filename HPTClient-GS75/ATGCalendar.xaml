<Window x:Class="HPTClient.ATGCalendar"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:HPT="clr-namespace:HPTClient"
    xmlns:MS="clr-namespace:Microsoft.Win32;assembly=mscorlib"
    xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
    Title="{Binding VersionText}"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    Icon="Icons/HPT.ico" Initialized="atgCalendar_Initialized"
    Closing="Window_Closing"
    Loaded="Window_Loaded"
    x:Name="atgCalendar">
    
    <Window.Resources>

        <BooleanToVisibilityConverter x:Key="hptVisibilityConverter"/>

        <Style x:Key="ItemContStyle" TargetType="{x:Type ListBoxItem}">
            <Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="2"/>
            <Setter Property="Margin" Value="2"/>
            <!--<Setter Property="Visibility" Value="{Binding ShowInUI,Converter={StaticResource hptVisibilityConverter}}"/>-->
        </Style>

        <Style x:Key="ButtonStyleJackpot" TargetType="{x:Type Button}">
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <!--<Setter Property="Background" Value="{StaticResource SelectedBrush}"/>-->
            <Style.Triggers>
                <!--<DataTrigger Binding="{Binding Jackpot}" Value="0">
                    <Setter Property="Background" Value="White" />
                </DataTrigger>-->
                <!--<Trigger Property="Content" Value="{x:Null}">
                    <Setter Property="Visibility" Value="Hidden"/>
                </Trigger>-->
            </Style.Triggers>
        </Style>

        <DataTemplate x:Key="lstTrackAndDate">
            <Border BorderBrush="Black" BorderThickness="1" CornerRadius="0" Width="150">
                <!--<Grid Background="{StaticResource StandardBrush}">-->
                <Grid Background="LightGray">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <TextBlock Text="{Binding Trackname}" Style="{StaticResource tbBigStyle}" Grid.Row="0" TextAlignment="Left" Padding="3" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                    <TextBlock Text="{Binding Path=RaceDayDate,StringFormat='yyyy-MM-dd HH:mm'}" Style="{StaticResource tbStyle}" Grid.Row="1" TextAlignment="Left" Padding="3" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                    <TextBlock Text="{Binding Path=TrackCondition}" FontStyle="Italic" Grid.Row="2" TextAlignment="Left" Padding="3,1" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                </Grid>
            </Border>
        </DataTemplate>

        <Style x:Key="fileItemStyle" TargetType="{x:Type MenuItem}">
            <Setter Property="Header" Value="{Binding DisplayName}"/>
            <Setter Property="Icon" Value="{Binding FileTypeImage}"/>
        </Style>

        <Style x:Key="downloadItemStyle" TargetType="{x:Type MenuItem}">
            <!--<Setter Property="Header" Value="{Binding DisplayName}"/>-->
            <Setter Property="Icon" Value="{Binding BetTypeATGLogo}"/>
            <Setter Property="Height" Value="24"/>
        </Style>
        
        <Style TargetType="{x:Type FrameworkElement}">
            <Setter Property="ToolTipService.InitialShowDelay" Value="2000"/>
        </Style>
        
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Menu x:Name="MainMenu" Grid.Row="0">
            <Menu.Resources>
                <Style TargetType="{x:Type MenuItem}">
                    <Setter Property="FontSize" Value="13"/>
                    <Setter Property="FontFamily" Value="Tahoma"/>
                </Style>
            </Menu.Resources>

            <MenuItem Header="_Fil">
                <MenuItem Name="miOpen" Header="Öppna" Click="miOpen_Click">
                    <MenuItem.Icon>
                        <Image Source="/Icons/folderopen.ico"/>
                    </MenuItem.Icon>
                </MenuItem>
                <!--<MenuItem Name="miSave" Header="Spara" IsEnabled="False">
                    <MenuItem.Icon>
                        <Image Source="Icons/save-32x32.png"/>
                    </MenuItem.Icon>
                </MenuItem>-->
                <MenuItem Name="miUpdateCalendar" Header="Uppdatera kalender" Click="miUpdateCalendar_Click">
                    <MenuItem.Icon>
                        <Image Source="/HPTLogoSmall.png" MaxWidth="16" MaxHeight="16" />
                    </MenuItem.Icon>
                </MenuItem>
                <!--<MenuItem Name="miDownLoadSystem" Header="Hämta systemförslag" ItemsSource="{Binding Path=Config.MarkBetSystemList}" 
                           ItemContainerStyle="{StaticResource downloadItemStyle}" MenuItem.Click="miDownLoadSystem_Click">
                    <MenuItem.Icon>
                        <Image Source="/HPTLogoSmall.png" MaxHeight="16" />
                    </MenuItem.Icon>
                </MenuItem>-->

                <!--<MenuItem Name="miDownloadOnlineSystem" Header="Hämta dina online-system" Click="miDownloadOnlineSystem_Click">
                </MenuItem>-->
                
                <Separator/>

                <!--<MenuItem Name="miUpgradeToPRO" Header="Köp/förläng HPT Pro" Click="miUpgradeToPRO_Click">-->
                <!--<MenuItem Name="miUpgradeToPRO" Header="Köp/förläng HPT Pro">
                    <MenuItem.Icon>
                        <Image Source="/HPTLogoSmall.png" MaxHeight="16"/>
                    </MenuItem.Icon>
                    <MenuItem x:Name="miOneYearSubscription" Header="Köp ett år" Click="miOneYearSubscription_Click"/>
                    <MenuItem x:Name="miThreeMonthsSubscription" Header="Köp tre månader" Click="miThreeMonthsSubscription_Click"/>
                </MenuItem>-->
                <!--<MenuItem Name="miNews" Header="Hemsidan" IsEnabled="True" Click="miNews_Click">
                    <MenuItem.Icon>
                        <Image Source="/HPTLogoSmall.png" MaxHeight="16" />
                    </MenuItem.Icon>
                </MenuItem>-->
                <MenuItem Name="miUpdateAndRestart" Header="Uppdatera och starta om" IsEnabled="True" Click="miUpdateAndRestart_Click">
                    <MenuItem.Icon>
                        <Image Source="/Icons/HPT.ico" MaxHeight="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <!--<MenuItem Name="miATG" Header="ATGs hemsida" IsEnabled="True" Click="miATG_Click">
                    <MenuItem.Icon>
                        <Image Source="/ATGImages/ATGSmall.png" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Name="miFacebook" Header="HPT på Facebook" IsEnabled="True" Click="miFacebook_Click">
                    <MenuItem.Icon>
                        <Image Source="/ImagesSmall/Facebook.png" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Name="miVeckansReducerade" Header="Veckans reducerade" IsEnabled="True" Click="miVeckansReducerade_Click">
                    <MenuItem.Icon>
                        <Image Source="/ImagesSmall/Facebook.png" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>-->

                <!--<Separator/>-->

                <MenuItem Name="miErrorLog" Header="Fellogg" IsEnabled="True" Click="miErrorLog_Click">
                    <MenuItem.Icon>
                        <Image Source="Icons/error.ico"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem x:Name="miShutDown" Header="Avsluta" Click="miShutDown_Click">
                    <MenuItem.Icon>
                        <Image Source="/Icons/delete_16x.ico" Height="16"/>
                    </MenuItem.Icon>
                </MenuItem>

                <Separator/>

                <MenuItem x:Name="miRecentFiles" Header="Senaste system" Click="miFile_Click" ItemsSource="{Binding Path=Config.RecentFileList}" ItemContainerStyle="{StaticResource fileItemStyle}"/>

                <!--<MenuItem x:Name="miAnalysis" Header="Analys" Click="miAnalysis_Click"/>-->

                <!--<MenuItem x:Name="miGetOldMarkbets" Header="Hämta gammalt..." Click="miGetOldMarkbets_Click"/>-->

                <!--<MenuItem x:Name="miCollectDataFromOldMarkBets" Header="Analysera gamla lopp..." Click="miCollectDataFromOldMarkBets_Click"/>-->

                <!--<MenuItem x:Name="miAnalyzeJackpotRows" Header="Analysera jackpott..." Click="miAnalyzeJackpotRows_Click"/>-->

            </MenuItem>

            <MenuItem Header="_Inställningar" Margin="1" >
                
                <!--<MenuItem x:Name="miRegister" Header="Registrera/Prova PRO" Click="miRegister_Click">
                    <MenuItem.Icon>
                        <Image Source="Icons/HPT.ico"/>
                    </MenuItem.Icon>
                </MenuItem>-->
                
                <MenuItem x:Name="miSettingsVxx" Header="Streckspel" Click="miSettingsVxx_Click">
                </MenuItem>
                
                <MenuItem x:Name="miSettingsCombination" Header="Kombinationsspel" Click="miSettingsCombination_Click"/>

                <!--<MenuItem x:Name="miSettingsDouble" Header="Dagens Dubbel/Lunchdubbel">
                    <HPT:UCDataToShowSettings DataContext="{Binding Path=Config.DataToShowDD}" Text="Data DD/LD"/>
                </MenuItem>

                <MenuItem x:Name="miSettingsTvilling" Header="Tvilling">
                    <HPT:UCDataToShowSettings DataContext="{Binding Path=Config.DataToShowTvilling}" Text="Data Tvilling"/>
                </MenuItem>

                <MenuItem x:Name="miSettingsTrio" Header="Trio">
                    <HPT:UCDataToShowSettings DataContext="{Binding Path=Config.DataToShowTrio}" Text="Data Trio"/>
                </MenuItem>-->

                <MenuItem x:Name="miResetConfiguration" Header="Återställ konfiguration" Click="miResetConfiguration_Click"/>

                <!--<MenuItem x:Name="miUploadConfiguration" Header="Säkerhetskopiera konfiguration till server" Click="miUploadConfiguration_Click"/>-->

                <!--<MenuItem x:Name="miDownloadConfiguration" Header="Hämta konfiguration från server" Click="miDownloadConfiguration_Click"/>-->

                <!--<MenuItem x:Name="miSettingsAll" Header="Fler inställningar..." Click="miSettingsAll_Click"/>-->

                <MenuItem Name="miTemplates" Header="Mallar" Click="miTemplates_Click">
                    <MenuItem.Icon>
                        <Image Source="Icons/propertiesORoptions.ico"/>
                    </MenuItem.Icon>
                </MenuItem>
                
                <MenuItem Name="miGUISettings" Header="Gränssnitt">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Zoom" VerticalAlignment="Center"/>
                        <xctk:DecimalUpDown Name="dudZoom" Minimum="0.5" Maximum="2.0" Increment="0.1" FormatString="P0"
                                                Value="{Binding Path=Config.Zoom}"/>
                    </StackPanel>
                </MenuItem>
                
            </MenuItem>

            <!--<MenuItem Header="Profiler">
                <MenuItem x:Name="miSelectProfileSimple" Header="Enkel" Tag="0" Click="miSelectProfile_Click"/>
                <MenuItem x:Name="miSelectProfileStandard" Header="Standard" Tag="1" Click="miSelectProfile_Click"/>
                <MenuItem x:Name="miSelectProfileAdvanced" Header="Komplett" Tag="2" Click="miSelectProfile_Click"/>
                <Separator/>
                <MenuItem x:Name="miResetProfiles" Header="Återställ" Click="miResetProfiles_Click" IsEnabled="False"/>
            </MenuItem>-->

            <MenuItem x:Name="miSavedSystems" Header="Sparade system" ItemsSource="{Binding Path=Config.HPTSystemDirectories}" Click="miFile_Click">
                <MenuItem.ItemContainerStyle >
                    <Style TargetType="{x:Type MenuItem}">
                        <Setter Property="Header" Value="{Binding DirectoryNameShort}"/>
                        <Setter Property="ItemsSource" Value="{Binding FileList}"/>
                        <Setter Property="ItemContainerStyle" Value="{StaticResource fileItemStyle}"/>
                    </Style>
                </MenuItem.ItemContainerStyle >
            </MenuItem>
            
            <!--<MenuItem x:Name="miSimulateHeader" Header="Simulera">
                <MenuItem x:Name="miSimulateV4" Header="V4" Click="miSimulateV4_Click"/>
                <MenuItem x:Name="miSimulateV5" Header="V5" Click="miSimulateV5_Click"/>
                <MenuItem x:Name="miSimulateV6X" Header="V65" Click="miSimulateV6X_Click"/>
                <MenuItem x:Name="miSimulateV75" Header="V75" Click="miSimulateV75_Click"/>
                <MenuItem x:Name="miSimulateV86" Header="V86" Click="miSimulateV86_Click"/>
                <MenuItem x:Name="miSimulateDD" Header="Dagens Dubbel" Click="miSimulateDD_Click"/>
                <MenuItem x:Name="miSimulateTvilling" Header="Tvilling" Click="miSimulateTvilling_Click"/>
                <MenuItem x:Name="miSimulateTrio" Header="Trio" Click="miSimulateTrio_Click"/>
            </MenuItem>-->

            <MenuItem x:Name="miHelp" Header="Hjälp">
                <MenuItem x:Name="miAbout" Header="Om" Click="miAbout_Click"/>
                <!--<MenuItem x:Name="miManual" Header="Öppna manual" Click="miManual_Click" />-->
                <!--<MenuItem x:Name="miGetManual" Header="Hämta manual" Click="miGetManual_Click" />-->
                <!--<MenuItem x:Name="miExamples" Header="Exempel" Click="miExamples_Click"/>-->
                <!--<MenuItem x:Name="miArticles" Header="Veckans reducerade" Click="miArticles_Click">
                </MenuItem>
                <MenuItem x:Name="miForum" Header="Diskutera HPT" Click="miForum_Click">
                </MenuItem>-->
            </MenuItem>

        </Menu>

        <TabControl x:Name="tcMain" Grid.Row="2">
            <TabControl.LayoutTransform>
                <ScaleTransform ScaleX="{Binding Path=Config.Zoom}" ScaleY="{Binding Path=Config.Zoom}"/>
            </TabControl.LayoutTransform>
            
            <TabItem x:Name="tiCalendar" IsSelected="True">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="HptLogo.png" Height="28"/>
                        <TextBlock Text="Kalender" Margin="1" FontSize="18" FontWeight="SemiBold" VerticalAlignment="Center"  Foreground="Black"/>
                    </StackPanel>
                </TabItem.Header>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <StackPanel Orientation="Vertical">

                        <ItemsControl ItemsSource="{Binding MessageList}" Grid.Row="1">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="Red" BorderThickness="3" Margin="2" Background="{StaticResource SelectedBrush}">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Message}" FontSize="14" FontWeight="SemiBold"/>
                                            <!--<Button x:Name="btnDownload" Content="Ladda ner"  Click="btnDownload_Click"/>
                                            <Button x:Name="btnHomepage" Content="Gå till hemsidan"  Click="btnHomepage_Click"/>-->
                                            <Button x:Name="btnClose" Content="Stäng"  Click="btnClose_Click"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <!--<Border BorderBrush="Red" BorderThickness="3" Margin="2" Background="{StaticResource SelectedBrush}" Grid.Row="3" Visibility="{Binding LicenseInformationVisibility}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Programlicensen används just nu på flera datorer, vilket inte är tillåtet!" FontSize="14" FontWeight="Bold"/>
                                <Button x:Name="btnBuyAYearsLicense" Content="Köp abonnemang" Click="btnBuyAYearsLicense_Click" Margin="10,1,1,1"/>
                            </StackPanel>
                        </Border>-->

                        <!--<Border BorderBrush="Red" BorderThickness="3" Margin="2" Background="{StaticResource SelectedBrush}" Grid.Row="3" Visibility="{Binding NewsVisibility}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Path=LatestNewsHeadline}" FontSize="14" FontWeight="Bold"/>
                                <Button x:Name="btnGoToHomepage" Content="Gå till hemsidan" Click="btnGoToHomepage_Click" Margin="10,1,1,1"/>
                                <Button x:Name="btnCloseNewsInfo" Content="Stäng" Click="btnCloseNewsInfo_Click" Margin="1"/>
                            </StackPanel>
                        </Border>-->

                        <StackPanel Orientation="Horizontal">
                            <CheckBox x:Name="chkShowYesterday" Content="Visa gårdagens tävlingar" Checked="chkShowOnlySwedishTracks_Checked" Unchecked="chkShowOnlySwedishTracks_Checked" Margin="2,1"/>
                            <CheckBox x:Name="chkShowPreviousWeek" Content="Visa förra veckans tävlingar" Checked="chkShowOnlySwedishTracks_Checked" Unchecked="chkShowOnlySwedishTracks_Checked" Margin="2,1"/>
                            <CheckBox x:Name="chkShowOnlySwedishTracks" Content="Visa bara svenska tävlingar" Checked="chkShowOnlySwedishTracks_Checked" Unchecked="chkShowOnlySwedishTracks_Checked" Margin="10,1,1,1"/>
                            <CheckBox x:Name="chkShowOnlyWithMarksGame" Content="Visa bara tävlingar med streckspel" Checked="chkShowOnlySwedishTracks_Checked" Unchecked="chkShowOnlySwedishTracks_Checked" Margin="10,1,1,1"/>
                        </StackPanel>                        

                    </StackPanel>

                    <ListView Name="lvwCalenda" ItemsSource="{Binding Path=hptCalendar.RaceDayInfoList}" ItemContainerStyle="{StaticResource ItemContStyle}" ButtonBase.Click="hlBetType_Click" Grid.Row="1">
                        
                        <ListView.Resources>
                            <Style TargetType="{x:Type GridViewColumnHeader}">
                                <Style.Setters>
                                    <Setter Property="BorderBrush" Value="Black"/>
                                    <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                    <Setter Property="Background" Value="{StaticResource HeaderGrayBrush}"/>
                                    <Setter Property="FontSize" Value="14"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                </Style.Setters>
                            </Style>
                        </ListView.Resources>
                        
                        <ListView.View>
                            <GridView x:Name="gvwVxxSpel">
                                
                                <GridViewColumn CellTemplate="{StaticResource lstTrackAndDate}" Header="Tävlingsinfo"/>

                                <GridViewColumn Header="V64/V75/V86/GS75">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <HPT:UCCalendarRaceDayInfoButton DataContext="{Binding Path=BetTypeVxx}"
                                                                             Visibility="{Binding Path=BetTypeVxx,TargetNullValue=Hidden}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn Header="V4">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <HPT:UCCalendarRaceDayInfoButton DataContext="{Binding Path=BetTypeV4}"
                                                                             Visibility="{Binding Path=BetTypeV4,TargetNullValue=Hidden}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn Header="V5">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <HPT:UCCalendarRaceDayInfoButton DataContext="{Binding Path=BetTypeV5}" 
                                                                             Visibility="{Binding Path=BetTypeV5,TargetNullValue=Hidden}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn Header="V65">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <HPT:UCCalendarRaceDayInfoButton DataContext="{Binding Path=BetTypeV65}" 
                                                                             Visibility="{Binding Path=BetTypeV65,TargetNullValue=Hidden}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn Header="Dagens Dubbel">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <HPT:UCCalendarRaceDayInfoButton DataContext="{Binding Path=BetTypeDouble}" 
                                                                             Visibility="{Binding Path=BetTypeDouble,TargetNullValue=Hidden}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn Header="Lunch Dubbel">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <HPT:UCCalendarRaceDayInfoButton DataContext="{Binding Path=BetTypeLunchDouble}" 
                                                                             Visibility="{Binding Path=BetTypeLunchDouble,TargetNullValue=Hidden}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn Header="Tvilling">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <HPT:UCCalendarRaceDayInfoButton DataContext="{Binding Path=BetTypeTvilling}" 
                                                                             Visibility="{Binding Path=BetTypeTvilling,TargetNullValue=Hidden}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn Header="Trio">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <HPT:UCCalendarRaceDayInfoButton DataContext="{Binding Path=BetTypeTrio}" 
                                                                             Visibility="{Binding Path=BetTypeTrio,TargetNullValue=Hidden}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                            </GridView>
                        </ListView.View>
                    </ListView>

                </Grid>
            </TabItem>

            <TabItem x:Name="tiNextTimers">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="HptLogo.png" Height="28"/>
                        <TextBlock Text="Bevakningar" Margin="1" FontSize="18" FontWeight="SemiBold" VerticalAlignment="Center"  Foreground="Black"/>
                    </StackPanel>
                </TabItem.Header>
                <HPT:UCOwnInformationView DataContext="{Binding Path=Config,ElementName=atgCalendar}" RaceDayInfoSelected="UCOwnInformationView_RaceDayInfoSelected"/>
            </TabItem>
        </TabControl>

        <StackPanel Orientation="Vertical" Grid.Row="3">
            <ItemsControl ItemsSource="{Binding LoadingInfoList}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="Black" BorderThickness="1" Margin="2" CornerRadius="2" HorizontalAlignment="Stretch">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                                <TextBlock Text="{Binding Message}" Width="400" Style="{StaticResource tbBigStyle}" Margin="2"  />
                                <TextBlock Text="{Binding ErrorString}" Style="{StaticResource tbBigStyle}" Foreground="Red" Margin="2"/>
                                <Button x:Name="btnCloseFailedLoad" Content="Stäng" Click="btnCloseFailedLoad_Click" Visibility="{Binding ButtonVisibility}" Padding="1"/>
                                <ProgressBar Height="20" Name="pbLoading" Width="500">
                                    <ProgressBar.Triggers>
                                        <EventTrigger RoutedEvent="ProgressBar.Loaded">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="pbLoading" Storyboard.TargetProperty="Value" From="0" To="100" Duration="0:0:50" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </ProgressBar.Triggers>
                                </ProgressBar>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>

    </Grid>
</Window>
