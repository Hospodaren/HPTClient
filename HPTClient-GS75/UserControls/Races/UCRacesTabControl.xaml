<HPT:UCMarkBetControl x:Class="HPTClient.UCRacesTabControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
            xmlns:HPT="clr-namespace:HPTClient"
            xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             mc:Ignorable="d" 
             x:Name="ucRacesTabControl">
    <Grid>

        <TabControl x:Name="tcRaces" TabStripPlacement="Left" ItemsSource="{Binding RaceList}" SelectedIndex="0" Grid.Row="0">

            <TabControl.ItemTemplate>
                <DataTemplate>
                    <HPT:UCTabItemHeader Text="{Binding LegNrString}"/>
                    <!--<HPT:UCTabItemHeader>
                        <HPT:UCTabItemHeader.Text>
                            <MultiBinding StringFormat="{}{0} ({1})">
                                <Binding Path="LegNrString"/>
                                <Binding Path="TrackCode"/>
                            </MultiBinding>
                        </HPT:UCTabItemHeader.Text>
                    </HPT:UCTabItemHeader>-->
                </DataTemplate>
            </TabControl.ItemTemplate>

            <TabControl.ContentTemplate>
                <DataTemplate>
                    <Grid Width="Auto" Height="Auto">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition />
                        </Grid.RowDefinitions>

                        <Border Grid.Row="0" BorderThickness="1,1,1,0" BorderBrush="Black">
                            <WrapPanel Orientation="Horizontal" Background="Orange">

                                <Label Margin="1,1,10,0" Padding="1,0">
                                    <Hyperlink x:Name="hlVPOnAtgSe" NavigateUri="{Binding Path=ATGLink}" RequestNavigate="hlVPOnAtgSe_RequestNavigate">
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="{}{0} lopp {1}">
                                                    <Binding Path="TrackName"/>
                                                    <Binding Path="RaceNr"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </Hyperlink>
                                </Label>

                                <TextBlock Text="{Binding RaceInfoShort}" Margin="2,2,10,2" FontWeight="Bold" Background="Orange">
                                                <TextBlock.ToolTip>
                                                    <ToolTip Background="{StaticResource BackgroundBrush}" ToolTipService.ShowDuration="5000" DataContext="{Binding Path=PlacementTarget.DataContext, RelativeSource={x:Static RelativeSource.Self}}">
                                                        <Border BorderBrush="Black" BorderThickness="1" Margin="2">
                                                            <TextBlock Text="{Binding RaceInfoLong}" Style="{StaticResource tbStyle}" Margin="2"/>
                                                        </Border>
                                                    </ToolTip>
                                                </TextBlock.ToolTip>
                                            </TextBlock>

                                <TextBlock Text="{Binding RaceName}" Margin="2" Background="Orange">
                                                <TextBlock.ToolTip>
                                                    <ToolTip Background="{StaticResource BackgroundBrush}" ToolTipService.ShowDuration="5000" DataContext="{Binding Path=PlacementTarget.DataContext, RelativeSource={x:Static RelativeSource.Self}}">
                                                        <Border BorderBrush="Black" BorderThickness="1" Margin="2">
                                                            <TextBlock Text="{Binding RaceInfoLong}" Style="{StaticResource tbStyle}" Margin="2"/>
                                                        </Border>
                                                    </ToolTip>
                                                </TextBlock.ToolTip>
                                            </TextBlock>

                                <TextBlock Margin="10,2,2,2" Background="Orange" Text="Omsättning:" FontWeight="Bold"/>
                                <TextBlock Margin="2" Background="Orange">
                                                <TextBlock.Text>
                                                    <MultiBinding StringFormat="{}V:{0:N0} kr, P:{1:N0} kr" ConverterCulture="sv-SE">
                                                        <Binding Path="TurnoverVinnare"/>
                                                        <Binding Path="TurnoverPlats"/>
                                                    </MultiBinding>
                                                </TextBlock.Text>
                                </TextBlock>

                                <TextBlock Margin="10,2,2,2" Background="Orange" Text="Starttid:" FontWeight="Bold"/>
                                <TextBlock Margin="2" Text="{Binding Path=PostTime,StringFormat={}{0:HH:mm}}" Background="Orange"/>

                            </WrapPanel>
                        </Border>

                        <HPT:UCRaceView MarkBet="{Binding Path=MarkBet,ElementName=ucRacesTabControl}" Grid.Row="1"/>
                    </Grid>
                </DataTemplate>
            </TabControl.ContentTemplate>
        </TabControl>

    </Grid>
</HPT:UCMarkBetControl>
