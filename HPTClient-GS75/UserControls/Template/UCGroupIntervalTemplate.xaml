<UserControl x:Class="HPTClient.UCGroupIntervalTemplate"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
            xmlns:HPT="clr-namespace:HPTClient"
             x:Name="ucGroupIntervalTemplate"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="800">
    <Grid>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                <StackPanel.Resources>
                    <Style TargetType="{x:Type Button}">
                        <Setter Property="Padding" Value="3"/>
                        <Setter Property="Margin" Value="2"/>
                        <Setter Property="MinWidth" Value="60"/>
                        <Setter Property="Height" Value="25"/>
                    </Style>
                    <Style TargetType="{x:Type Border}">
                        <Setter Property="Margin" Value="2"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="BorderBrush" Value="DarkBlue"/>
                        <Setter Property="CornerRadius" Value="1"/>
                    </Style>
                </StackPanel.Resources>

                <Border>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Namn" Margin="2" Foreground="Black" FontSize="12" VerticalAlignment="Center"/>
                        <TextBox x:Name="txtName" Text="{Binding Name}" Margin="2" Width="200"/>
                        <Button x:Name="btnRemoveTemplate" Content="Ta bort mall" Click="btnRemoveTemplate_Click"/>
                    </StackPanel>
                </Border>

                <Border>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Spelform" Margin="2" Foreground="Black" FontSize="12"/>
                        <ComboBox x:Name="cmbBetTypeCategory" SelectedItem="{Binding TypeCategory}" Width="100" Margin="2"
                          ItemsSource="{Binding Path=Config.BetTypeCategoryList,ElementName=ucGroupIntervalTemplate}"
                          SelectionChanged="cmbBetTypeCategory_SelectionChanged"/>
                    </StackPanel>
                </Border>

                <Border>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Button x:Name="btnNewRule" Click="btnNewRule_Click" Content="Ny regel"/>
                        <Button x:Name="btnRemoveAll" Click="btnRemoveAll_Click" Content="Ta bort alla"/>
                        <Button x:Name="btnClone" Click="btnClone_Click"  Content="Klona"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <ListView Name="lvwGroupIntervalRules" ItemsSource="{Binding Path=ReductionRuleList}" 
                      Grid.Row="1" BorderThickness="0"
                      ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto">

                <ListView.Resources>
                    <Style TargetType="{x:Type GridViewColumnHeader}">
                        <Style.Setters>
                            <Setter Property="BorderBrush" Value="Black"/>
                            <Setter Property="HorizontalContentAlignment" Value="Left"/>
                            <Setter Property="Background" Value="{StaticResource HeaderGrayBrush}"/>
                        </Style.Setters>
                    </Style>

                    <Style TargetType="{x:Type ListViewItem}">
                        <Setter Property="Background" Value="{StaticResource StandardBrush}"/>
                        <Setter Property="BorderBrush" Value="Black"></Setter>
                        <Setter Property="BorderThickness" Value="0.5"></Setter>
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Setter Property="Margin" Value="1"/>
                    </Style>

                </ListView.Resources>

                <ListView.View>
                    <GridView x:Name="gvwGroupIntervalReductionRules">

                        <!--<GridViewColumn x:Name="gvcUseRule">
                            <GridViewColumnHeader ToolTipService.ToolTip="Klicka för att använda regel"/>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding Use}" Checked="CheckBox_Checked" Unchecked="CheckBox_Checked"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>-->

                        <GridViewColumn x:Name="gvcVariable">
                            <GridViewColumnHeader Content="Fält" ToolTipService.ToolTip="Välj vilken egenskap hos häst regeln ska gälla"/>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <ComboBox x:Name="cmbVariable" MinWidth="100" ItemsSource="{Binding Path=Config.HorseVariableList,ElementName=ucGroupIntervalTemplate}" SelectedItem="{Binding HorseVariable,Mode=TwoWay}" Tag="{Binding}" SelectionChanged="cmbVariable_SelectionChanged"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn x:Name="gvcNumberOfWinners">
                            <GridViewColumnHeader Content="Antal vinnare" ToolTipService.ToolTip="Klicka för att använda regel"/>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <ItemsControl ItemsSource="{Binding NumberOfWinnersList}" Margin="2">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Horizontal"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <CheckBox Template="{StaticResource CheckBoxTemplate}" 
                                                  Content="{Binding NumberOfWinners}" 
                                                  IsChecked="{Binding Selected}" 
                                                  IsEnabled="{Binding Selectable}"
                                                  FontSize="12"
                                                  Width="13"
                                                  Height="16"/>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn x:Name="gvcMinValue">
                            <GridViewColumnHeader Content="Min" ToolTipService.ToolTip="Välj vilken egenskap hos häst regeln ska gälla"/>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <xctk:DecimalUpDown x:Name="dudMinValue" 
                                                       Minimum="{Binding Path=HorseVariable.GroupReductionInfo.MinValue}"
                                                       Maximum="{Binding Path=HorseVariable.GroupReductionInfo.MaxValue}"
                                                       Increment="{Binding Path=HorseVariable.GroupReductionInfo.Increment}"
                                                       Value="{Binding LowerBoundary}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn x:Name="gvcMaxValue">
                            <GridViewColumnHeader Content="Max" ToolTipService.ToolTip="Välj vilken egenskap hos häst regeln ska gälla"/>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <xctk:DecimalUpDown x:Name="dudMaxValue" 
                                                       Minimum="{Binding Path=HorseVariable.GroupReductionInfo.MinValue}"
                                                       Maximum="{Binding Path=HorseVariable.GroupReductionInfo.MaxValue}"
                                                       Increment="{Binding Path=HorseVariable.GroupReductionInfo.Increment}"
                                                       Value="{Binding UpperBoundary}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn x:Name="gvcRemove">
                            <GridViewColumnHeader ToolTipService.ToolTip="Klicka för att använda regel"/>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Button x:Name="btnRemove" Content="Ta bort" Click="btnRemove_Click"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                    </GridView>
                </ListView.View>
            </ListView>

        </Grid>

    </Grid>
</UserControl>
