<UserControl x:Class="HPTClient.UCHorseCommentList"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d">
    <Grid>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition />
            </Grid.RowDefinitions>

            <Button x:Name="btnAddComment" Content="Lägg till kommentar" Click="btnAddComment_Click" Margin="1"/>
            <TextBlock Text="{Binding}" FontSize="12" FontWeight="Bold" Margin="1" VerticalAlignment="Center" Grid.Column="1"/>

            <ListBox x:Name="lstHorseComments" ItemsSource="{Binding Path=OwnInformation.HorseOwnInformationCommentList}" Grid.Row="1" Grid.ColumnSpan="2">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Vertical"/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="Black" BorderThickness="1" CornerRadius="1" Width="400" Padding="1">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock x:Name="tbUserAndTime" FontSize="11" FontWeight="Bold">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}{0} ({1:yyyy-MM-dd HH:mm})">
                                            <Binding Path="CommentUser"/>
                                            <Binding Path="CommentDate"/>
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                                
                                <Button x:Name="btnRemoveComment" Click="btnRemoveComment_Click_1" Grid.Column="1" Content="Ta bort">
                                    <Button.Style>
                                        <Style TargetType="{x:Type Button}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsOwnComment}" Value="False">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <Border x:Name="bdrNextTimer" BorderBrush="Black" BorderThickness="1" CornerRadius="1" Grid.Column="2" Background="OrangeRed">
                                    <Border.Style>
                                        <Style TargetType="{x:Type Border}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding NextTimer}" Value="False">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <TextBlock x:Name="tbNextTimer" Text="NG" FontSize="10" Padding="2" Foreground="Black" FontWeight="Bold"/>                                        
                                </Border>

                                <TextBox x:Name="txtComment" Text="{Binding Path=Comment,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" 
                                         MaxLines="10" TextWrapping="Wrap" IsEnabled="{Binding IsOwnComment}" FontSize="10" Loaded="txtComment_Loaded_1"
                                         Grid.Row="1" Grid.ColumnSpan="3"/>
                            </Grid>
                            <!--<StackPanel Orientation="Vertical">
                                <TextBlock x:Name="tbUserAndTime" FontSize="11" FontWeight="Bold">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}{0} ({1:yyyy-MM-dd HH:mm})">
                                            <Binding Path="CommentUser"/>
                                            <Binding Path="CommentDate"/>
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>

                                <TextBox x:Name="txtComment" Text="{Binding Path=Comment,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" 
                                         MaxLines="10" TextWrapping="Wrap" IsEnabled="{Binding IsOwnComment}" FontSize="10" Loaded="txtComment_Loaded_1"/>
                                
                            </StackPanel>-->
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            
        </Grid>
        
    </Grid>
</UserControl>
