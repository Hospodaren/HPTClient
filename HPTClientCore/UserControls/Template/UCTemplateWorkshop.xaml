<HPT:UCMarkBetControl x:Class="HPTClient.UCTemplateWorkshop"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             x:Name="ucTemplateWorkshop"
             xmlns:HPT="clr-namespace:HPTClient"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             mc:Ignorable="d">
    <Grid>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            
            <GroupBox Background="{StaticResource BackgroundBrush}" Grid.Row="0" HeaderTemplate="{StaticResource GroupBoxHeaderTemplate}" 
                      Header="Rankvariabelmallar" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderBrush="Black">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!--<TextBlock Text="Rankvariabelmallar" FontSize="12" FontWeight="Bold" Margin="2"/>-->

                        <ComboBox x:Name="cmbRankTemplates" Grid.Row="0" Grid.ColumnSpan="2" Margin="2"
                              ItemsSource="{Binding Path=Config.RankTemplateList,ElementName=ucTemplateWorkshop}" 
                              SelectionChanged="cmbRankTemplates_SelectionChanged" Width="200" HorizontalAlignment="Left"/>

                        <TextBox x:Name="txtRankTemplateName" Text="{Binding Path=CurrentRankTemplate.Name,ElementName=ucTemplateWorkshop}"
                             HorizontalAlignment="Stretch" Grid.Row="1" Grid.Column="0" Margin="2"/>

                        <Button x:Name="btnSaveRankTemplate" Click="btnSaveRankTemplate_Click" Content="Spara"
                            Grid.Row="1" Grid.Column="1" Margin="2" Padding="2"/>

                        <ListView x:Name="lvwRankVariablesTemplate" Grid.Row="3" Margin="2" Grid.ColumnSpan="2"
                              ItemsSource="{Binding Path=CurrentRankTemplate.HorseRankVariableList,ElementName=ucTemplateWorkshop}">
                        <ListView.View>
                            <GridView x:Name="gvwRankVariablesTemplate">

                                <GridViewColumn x:Name="gvcCategory" Header="Kategori">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox x:Name="chkUseVariable" IsChecked="{Binding Use}" Content="{Binding CategoryText}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn x:Name="gvcVariable" Header="Variabel">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock  Text="{Binding Text}" FontWeight="Bold"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn x:Name="gvcWeight" Header="Vikt">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <xctk:DecimalUpDown x:Name="dudWeight" DefaultValue="1.0" Minimum="0.1" Maximum="10.0" Increment="0.1" Value="{Binding Weight}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                            </GridView>
                        </ListView.View>
                    </ListView>

                    </Grid>

            </GroupBox>

            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <GroupBox x:Name="gbMarkBetTemplate" Background="{StaticResource BackgroundBrush}" Grid.Row="0" HeaderTemplate="{StaticResource GroupBoxHeaderTemplate}" Header="Urval" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderBrush="Black">
                    <Grid HorizontalAlignment="Left">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="ABCDEF" Padding="2"/>
                        <ItemsControl ItemsSource="{Binding Path=CurrentMarkBetTemplateABCD.ABCDTemplateSettingsList,ElementName=ucTemplateWorkshop}" Grid.Row="1">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <CheckBox Template="{StaticResource CheckBoxTemplate}" 
                                                      Content="{Binding Prio}" 
                                                      IsChecked="{Binding Selected}" 
                                                      FontSize="12"
                                                      Width="16"
                                                      Height="16"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <TextBlock Text="Spikar" Grid.Column="1" Padding="2"/>
                        <xctk:IntegerUpDown x:Name="iudNumberOfSpikes" DefaultValue="0" Increment="1" Minimum="0" Maximum="7" Grid.Row="1" Grid.Column="1"
                                            Value="{Binding Path=CurrentMarkBetTemplateABCD.NumberOfSpikes,ElementName=ucTemplateWorkshop}" 
                                            HorizontalAlignment="Stretch" Margin="2" Padding="2"/>

                        <TextBlock Text="Storlek" Grid.Column="2" Padding="2"/>
                        <xctk:IntegerUpDown x:Name="iudDesiredSize" DefaultValue="100" Increment="100" Minimum="0" Maximum="1000000"
                                            Grid.Row="1" Grid.Column="2" HorizontalAlignment="Stretch" Margin="2" Padding="2"
                                            Value="{Binding Path=CurrentMarkBetTemplateABCD.DesiredSystemSize,ElementName=ucTemplateWorkshop}"/>

                    </Grid>
                </GroupBox>

                <GroupBox x:Name="gbSaveMarkBetTemplateABCD" Background="{StaticResource BackgroundBrush}" Grid.Row="0" Grid.Column="1" HeaderTemplate="{StaticResource GroupBoxHeaderTemplate}" Header="Spara som ABCD-mall" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderBrush="Black">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>                        

                        <TextBlock Text="Namn" Padding="2"/>
                        <TextBox x:Name="txtNameABCD" HorizontalAlignment="Stretch" Margin="2" Padding="2" MinWidth="150" MaxWidth="250"
                                 Text="{Binding Path=CurrentMarkBetTemplateABCD.Name,ElementName=ucTemplateWorkshop}"
                                 Grid.Row="1" Grid.Column="0"/>
                        
                        <TextBlock Text="Reduceringsgrad" Grid.Column="1" Padding="2"/>
                        <xctk:IntegerUpDown x:Name="iudReductionQuota" DefaultValue="75" Increment="5" Minimum="0" Maximum="100" Grid.Column="1" Grid.Row="1"                                      
                                            Value="{Binding Path=CurrentMarkBetTemplateABCD.ReductionPercentage,ElementName=ucTemplateWorkshop}" 
                                            HorizontalAlignment="Stretch" Margin="2"/>
                        
                        <Button x:Name="btnSaveMarkBetABCDTemplate" Content="Spara" Margin="2" Padding="2"
                                    Click="btnSaveMarkBetABCDTemplate_Click" Grid.Column="2" Grid.Row="1"/>
                        
                    </Grid>
                </GroupBox>

                <GroupBox x:Name="gbSaveMarkBetTemplateRank" Background="{StaticResource BackgroundBrush}" Grid.Row="0" Grid.Column="2" HeaderTemplate="{StaticResource GroupBoxHeaderTemplate}" Header="Spara som rankmall" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderBrush="Black">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="Namn"/>
                        <TextBox x:Name="txtNameRank" HorizontalAlignment="Stretch" Margin="2" Padding="2" MinWidth="150" MaxWidth="250"
                                 Text="{Binding Path=CurrentMarkBetTemplateRank.Name,ElementName=ucTemplateWorkshop}"
                                 Grid.Row="1"/>

                        <TextBlock Text="Undre/övre procentgräns" Grid.Column="1" Grid.ColumnSpan="2" Padding="2"/>

                        <xctk:IntegerUpDown x:Name="iudLowerPercentageLimit" Grid.Column="1" Grid.Row="1" Margin="2" Padding="2"
                                            DefaultValue="0" Minimum="0" Maximum="100" Increment="5" 
                                            Value="{Binding Path=CurrentMarkBetTemplateRank.LowerPercentageLimit,ElementName=ucTemplateWorkshop}"/>
                        <xctk:IntegerUpDown x:Name="iudUpperPercentageLimit" Grid.Column="2" Grid.Row="1" Margin="2" Padding="2"
                                            DefaultValue="0" Minimum="0" Maximum="100" Increment="5"
                                            Value="{Binding Path=CurrentMarkBetTemplateRank.UpperPercentageLimit,ElementName=ucTemplateWorkshop}"/>
                        
                        <Button x:Name="btnSaveMarkBetRankTemplate" Content="Spara" Margin="2" Padding="2"
                                Click="btnSaveMarkBetRankTemplate_Click" Grid.Column="3" Grid.Row="1" />
                    </Grid>
                </GroupBox>

                <HPT:UCRaceViewGrouped x:Name="ucRaceView"  MarkBet="{Binding}" DataContext="{Binding}" GroupDescriptionName="ParentRace.LegNrString" 
                                ShowOnlySelected="True" Grid.Row="1" Grid.ColumnSpan="4"/>
            </Grid>

        </Grid>
    </Grid>
</HPT:UCMarkBetControl>
