<HPT:UCMarkBetControl x:Class="HPTClient.UCIntervalReductionNew"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
                      Loaded="UCMarkBetControl_Loaded"
            xmlns:HPT="clr-namespace:HPTClient"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="600">
    
    <UserControl.Resources>

        <Style TargetType="{x:Type xctk:IntegerUpDown}">
            <Setter Property="Width" Value="100"/>
            <Setter Property="FormatString" Value="N0"/>
        </Style>
        
        <Style TargetType="{x:Type ListViewItem}">
            <Setter Property="BorderBrush" Value="Black"></Setter>
            <Setter Property="BorderThickness" Value="0.5"></Setter>
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            <Setter Property="Margin" Value="1"/>
        </Style>
        
    </UserControl.Resources>
    <Grid>

        <ListView x:Name="lvwIntervalReduction" ItemsSource="{Binding IntervalReductionRuleList}" xctk:IntegerUpDown.ValueChanged="iudValueChanged">
            <ListView.View>
                <GridView x:Name="gvwIntervalReduction">
                    
                    <GridViewColumn x:Name="gvcReductionName" Header="Reduceringsvillkor">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox x:Name="chkUseReduction" IsChecked="{Binding Use}" Content="{Binding ReductionTypeString}" TextElement.FontWeight="Bold"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn x:Name="gvcLowestValue" Header="Lägsta värde">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock TextAlignment="Right" HorizontalAlignment="Right">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}{0:N0} ({1:N0})" ConverterCulture="sv-SE">
                                            <Binding Path="LowestIncludedSum"/>
                                            <Binding Path="LowestSum"/>
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn x:Name="gvcHighestValue" Header="Högsta värde">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock TextAlignment="Right" HorizontalAlignment="Right">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}{0:N0} ({1:N0})" ConverterCulture="sv-SE">
                                            <Binding Path="HighestIncludedSum"/>
                                            <Binding Path="HighestSum"/>
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    
                    <GridViewColumn x:Name="gvcMin" Header="Minimum">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <xctk:IntegerUpDown Increment="{Binding IncrementLower}" Value="{Binding MinSum}" 
                                                   Minimum="{Binding Path=LowestSum}" 
                                                   Maximum="{Binding Path=HighestSum}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn x:Name="gvcMax" Header="Maximum">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <xctk:IntegerUpDown Increment="{Binding IncrementUpper}" Value="{Binding MaxSum}" 
                                                   Minimum="{Binding Path=LowestSum}" 
                                                   Maximum="{Binding Path=HighestSum}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn x:Name="gvcMinPercent" Header="Minimum (%)">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <xctk:IntegerUpDown Increment="5" Value="{Binding MinPercentSum}" 
                                                   Minimum="0" Maximum="100"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn x:Name="gvcMaxPercent" Header="Maximum (%)">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <xctk:IntegerUpDown Increment="5" Value="{Binding MaxPercentSum}" 
                                                   Minimum="0" Maximum="100"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                </GridView>
            </ListView.View>
        </ListView>

    </Grid>
</HPT:UCMarkBetControl>
